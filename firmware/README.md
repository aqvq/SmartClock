# 智能家庭时钟

## 介绍

智能家庭时钟的固件程序部分，主要使用Arduino编写

## 实现功能

- 实现显示时间和日期的功能
- 实现网络时间与本地时间两种同步时间的方式
- 实现本地时间手动设置功能
- 实现实时温湿度检测
- 实现整点语音播报
- 实现定时闹钟设置与响铃功能
- 实现正计时和倒计时功能
- 实现WiFi一键配网与自动连接
- 实现中文显示界面并美化UI界面
- 实现使用旋转编码器进行输入控制
- 实现闹钟数据与配置数据的存储与读取功能
- 实现网络重置按钮和网络指示灯
- 实现调节亮度和音量功能

## 安装过程

1. 在VSCODE中安装`PlatformIO IDE`插件
2. `PlatformIO`会自动安装环境依赖，请等待安装结束
3. 参考[配置要求](#配置要求)部分进行项目环境的配置
4. 编译烧录固件
5. 焊接PCB与组装硬件

## 配置要求
1. 将配置文件`include/User_Setup.h`覆盖库`TFT_eSPI`中的同名文件
2. 将配置文件`include/lv_conf.h`覆盖库`lvgl`中的同名文件
3. 将库`DHT sensor library`中的文件`DHT_U.cpp`和`DHT_U.h`删除，否则会报错

## 文件结构

> 更详细的项目逻辑解释在源代码的注释中

- /include 程序头文件
- /lib 程序所需的库
- /src 程序源代码
  - main.cpp 主程序
  - network.cpp 网络配置模块
  - ui.cpp 交互界面模块
  - audio.cpp 语音模块
  - display.cpp 显示驱动模块
  - input.cpp 输入设备驱动模块
  - sensors.cpp 传感器模块
  - clock.cpp 闹钟与配置数据处理模块
  - ds1302.cpp 本地时钟模块
  - /fonts 汉字字库
  - /audio 语音文件


## 技术总结

- ESP32有些引脚有特殊需要注意，比如Strapping引脚、SPI flash 引脚以及仅输入的引脚等，在做这个项目的时候，就是误用了某些管脚，导致单片机无限重启、无法烧录、串口异常等问题。
- 如何将闹钟信息存储在非易失性存储区中？
- 如何设置网络模块，实现一件配网功能？
- 如何更好的提升操作体验，如何设计UI界面？如何配置旋转编码器？
